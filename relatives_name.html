<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>äº²æˆšå…³ç³»è®¡ç®—-å¸®å°å¿™ï¼Œè…¾è®¯QQæµè§ˆå™¨åœ¨çº¿å·¥å…·ç®±</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        .relative-calc {
            background: #fff;
            border-radius: 8px;
            padding: 24px;
            margin-bottom: 20px;
        }
        .calc-options {
            display: flex;
            gap: 16px;
            margin-bottom: 20px;
            flex-wrap: wrap;
            align-items: center;
        }
        .calc-option {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .calc-option input[type="checkbox"],
        .calc-option input[type="radio"] {
            width: 18px;
            height: 18px;
            cursor: pointer;
        }
        .relation-buttons {
            display: flex;
            flex-wrap: wrap;
            gap: 12px;
            margin-bottom: 20px;
        }
        .relation-btn {
            min-width: 60px;
            height: 44px;
            border: 1px solid var(--border-color);
            background: #fff;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .relation-btn:hover {
            border-color: var(--primary-color);
            color: var(--primary-color);
        }
        .relation-btn.delete-btn {
            background: var(--accent-color);
            color: #fff;
            border-color: var(--accent-color);
        }
        .relation-btn.delete-btn:hover {
            opacity: 0.9;
        }
        .relation-chain {
            background: var(--background-color);
            padding: 16px;
            border-radius: 8px;
            min-height: 50px;
            margin-bottom: 20px;
            font-size: 18px;
            color: var(--text-primary);
            display: flex;
            align-items: center;
            flex-wrap: wrap;
            gap: 8px;
        }
        .chain-item {
            background: var(--primary-color);
            color: #fff;
            padding: 6px 14px;
            border-radius: 16px;
            font-size: 14px;
        }
        .chain-arrow {
            color: var(--text-muted);
        }
        .result-display {
            background: linear-gradient(135deg, var(--primary-color), #8B7CF7);
            color: #fff;
            padding: 24px;
            border-radius: 12px;
            text-align: center;
        }
        .result-title {
            font-size: 14px;
            opacity: 0.9;
            margin-bottom: 8px;
        }
        .result-value {
            font-size: 32px;
            font-weight: bold;
        }
        .result-reverse {
            margin-top: 12px;
            font-size: 14px;
            opacity: 0.9;
        }
    </style>
</head>
<body data-category="education">
    <header class="header">
        <a href="index.html" class="header-logo">
            <span class="header-logo-icon">ğŸ”§</span>
            <div class="header-logo-text">
                <span class="header-logo-title">å¸®å°å¿™</span>
                <span class="header-logo-subtitle">è…¾è®¯QQæµè§ˆå™¨åœ¨çº¿å·¥å…·ç®±</span>
            </div>
        </a>
    </header>

    <div class="page-container">
        <aside class="sidebar"><nav class="sidebar-nav"></nav></aside>

        <main class="main-content">
            <div class="tool-page">
                <div class="tool-header">
                    <div class="tool-icon" style="background: #E74C3C;">ğŸ‘¨â€ğŸ‘©â€ğŸ‘§â€ğŸ‘¦</div>
                    <h1 class="tool-title">äº²æˆšå…³ç³»è®¡ç®—</h1>
                </div>

                <div class="tool-main">
                    <div class="relative-calc">
                        <div class="calc-options">
                            <label class="calc-option">
                                <input type="checkbox" id="reverseMode">
                                <span>å¯¹æ–¹ç§°å‘¼æˆ‘</span>
                            </label>
                            <div class="calc-option">
                                <span>æˆ‘çš„æ€§åˆ«ï¼š</span>
                                <label class="calc-option">
                                    <input type="radio" name="gender" value="male" checked>
                                    <span>ç”·</span>
                                </label>
                                <label class="calc-option">
                                    <input type="radio" name="gender" value="female">
                                    <span>å¥³</span>
                                </label>
                            </div>
                        </div>

                        <div class="relation-buttons">
                            <button class="relation-btn" onclick="addRelation('çˆ¶')">çˆ¶</button>
                            <button class="relation-btn" onclick="addRelation('æ¯')">æ¯</button>
                            <button class="relation-btn" onclick="addRelation('å¤«')">å¤«</button>
                            <button class="relation-btn" onclick="addRelation('å¦»')">å¦»</button>
                            <button class="relation-btn" onclick="addRelation('å­')">å­</button>
                            <button class="relation-btn" onclick="addRelation('å¥³')">å¥³</button>
                            <button class="relation-btn" onclick="addRelation('å…„')">å…„</button>
                            <button class="relation-btn" onclick="addRelation('å¼Ÿ')">å¼Ÿ</button>
                            <button class="relation-btn" onclick="addRelation('å§')">å§</button>
                            <button class="relation-btn" onclick="addRelation('å¦¹')">å¦¹</button>
                            <button class="relation-btn delete-btn" onclick="deleteLast()">â†</button>
                        </div>

                        <div class="relation-chain" id="relationChain">
                            <span style="color: var(--text-muted);">è¯·ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®æ·»åŠ å…³ç³»</span>
                        </div>

                        <div class="result-display">
                            <div class="result-title" id="resultTitle">æˆ‘ç§°å‘¼å¯¹æ–¹</div>
                            <div class="result-value" id="resultValue">è¯·é€‰æ‹©å…³ç³»</div>
                            <div class="result-reverse" id="resultReverse"></div>
                        </div>
                    </div>
                </div>

                <div class="tool-intro">
                    <h3>å·¥å…·ä»‹ç»åŠä½¿ç”¨æ–¹æ³•</h3>
                    <p>äº²æˆšå…³ç³»è®¡ç®—å™¨å¯ä»¥å¸®åŠ©æ‚¨å¿«é€Ÿè®¡ç®—å¤æ‚çš„äº²æˆšå…³ç³»ç§°è°“ã€‚åªéœ€ä¾æ¬¡ç‚¹å‡»å…³ç³»æŒ‰é’®ï¼Œç³»ç»Ÿä¼šè‡ªåŠ¨è®¡ç®—å‡ºæ­£ç¡®çš„ç§°å‘¼æ–¹å¼ã€‚æ”¯æŒè®¡ç®—"æˆ‘ç§°å‘¼å¯¹æ–¹"å’Œ"å¯¹æ–¹ç§°å‘¼æˆ‘"ä¸¤ç§æ¨¡å¼ï¼Œé€‚ç”¨äºå„ç§å®¶åº­èšä¼šã€èµ°äº²è®¿å‹ç­‰åœºæ™¯ã€‚</p>
                </div>

                <div class="more-recommend">
                    <h3 class="more-recommend-title">æ›´å¤šæ¨è</h3>
                    <div class="recommend-list">
                        <a href="allegory.html" class="recommend-item">
                            <div class="recommend-item-icon">ğŸ’¬</div>
                            <div class="recommend-item-content">
                                <div class="recommend-item-title">æ­‡åè¯­</div>
                                <div class="recommend-item-desc">æ­‡åè¯­å·¥å…·å¯ä»¥å¸®åŠ©æ‚¨æŸ¥æ‰¾å’Œå­¦ä¹ å„ç§æ­‡åè¯­ã€‚</div>
                            </div>
                        </a>
                        <a href="explain.html" class="recommend-item">
                            <div class="recommend-item-icon">ğŸ“š</div>
                            <div class="recommend-item-content">
                                <div class="recommend-item-title">è¯è¯­æ³¨è§£</div>
                                <div class="recommend-item-desc">æŸ¥è¯¢è¯è¯­çš„è¯¦ç»†è§£é‡Šã€æ‹¼éŸ³ã€è¯æ€§å’Œä¾‹å¥ã€‚</div>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <footer class="footer">
        <div class="footer-content">
            <div class="footer-logo"><span>ğŸ”§</span><span class="footer-text">è½»æ¾åŠå…¬ï¼Œå·¥å…·åŠ©ä½ ä¸€è‡‚ä¹‹åŠ›</span></div>
            <div class="footer-links">
                <a href="https://rule.tencent.com/rule/preview/10c4538f-a3b6-4292-803d-5c8498657b75" target="_blank" class="footer-link">éšç§æ”¿ç­–</a>
                <a href="https://static.res.qq.com/nav/qbtool/qbtool-license.html" target="_blank" class="footer-link">æ•°æ®å¤„ç†è§„åˆ™åŠå…è´£å£°æ˜</a>
            </div>
            <div class="footer-copyright">Copyright Â© 1998 - 2026 Tencent. All Rights Reserved.</div>
        </div>
    </footer>

    <script src="js/common.js"></script>
    <script>
        let relationChain = [];

        // äº²æˆšå…³ç³»æ˜ å°„è¡¨
        const RELATION_MAP = {
            'çˆ¶': { male: 'çˆ¶äº²', female: 'çˆ¶äº²' },
            'æ¯': { male: 'æ¯äº²', female: 'æ¯äº²' },
            'å¤«': { male: 'ä¸ˆå¤«', female: 'ä¸ˆå¤«' },
            'å¦»': { male: 'å¦»å­', female: 'å¦»å­' },
            'å­': { male: 'å„¿å­', female: 'å„¿å­' },
            'å¥³': { male: 'å¥³å„¿', female: 'å¥³å„¿' },
            'å…„': { male: 'å“¥å“¥', female: 'å“¥å“¥' },
            'å¼Ÿ': { male: 'å¼Ÿå¼Ÿ', female: 'å¼Ÿå¼Ÿ' },
            'å§': { male: 'å§å§', female: 'å§å§' },
            'å¦¹': { male: 'å¦¹å¦¹', female: 'å¦¹å¦¹' }
        };

        // å¤åˆå…³ç³»è®¡ç®—
        const COMPOUND_RELATIONS = {
            'çˆ¶çˆ¶': 'çˆ·çˆ·', 'æ¯çˆ¶': 'å¤–å…¬', 'çˆ¶æ¯': 'å¥¶å¥¶', 'æ¯æ¯': 'å¤–å©†',
            'çˆ¶å…„': 'ä¼¯çˆ¶', 'çˆ¶å¼Ÿ': 'å”å”', 'çˆ¶å§': 'å§‘å§‘', 'çˆ¶å¦¹': 'å§‘å§‘',
            'æ¯å…„': 'èˆ…èˆ…', 'æ¯å¼Ÿ': 'èˆ…èˆ…', 'æ¯å§': 'å§¨å¦ˆ', 'æ¯å¦¹': 'å§¨å¦ˆ',
            'å…„å­': 'ä¾„å­', 'å¼Ÿå­': 'ä¾„å­', 'å§å­': 'å¤–ç”¥', 'å¦¹å­': 'å¤–ç”¥',
            'å…„å¥³': 'ä¾„å¥³', 'å¼Ÿå¥³': 'ä¾„å¥³', 'å§å¥³': 'å¤–ç”¥å¥³', 'å¦¹å¥³': 'å¤–ç”¥å¥³',
            'å­å­': 'å­™å­', 'å­å¥³': 'å­™å¥³', 'å¥³å­': 'å¤–å­™', 'å¥³å¥³': 'å¤–å­™å¥³',
            'å¤«çˆ¶': 'å…¬å…¬', 'å¤«æ¯': 'å©†å©†', 'å¦»çˆ¶': 'å²³çˆ¶', 'å¦»æ¯': 'å²³æ¯',
            'çˆ¶å…„å¦»': 'ä¼¯æ¯', 'çˆ¶å¼Ÿå¦»': 'å©¶å©¶', 'æ¯å…„å¦»': 'èˆ…å¦ˆ', 'æ¯å§å¤«': 'å§¨çˆ¶',
            'å§å¤«': 'å§å¤«', 'å¦¹å¤«': 'å¦¹å¤«', 'å…„å¦»': 'å«‚å­', 'å¼Ÿå¦»': 'å¼Ÿå¦¹',
            'å­å¦»': 'å„¿åª³', 'å¥³å¤«': 'å¥³å©¿',
            'çˆ¶çˆ¶çˆ¶': 'æ›¾ç¥–çˆ¶', 'çˆ¶çˆ¶æ¯': 'æ›¾ç¥–æ¯', 'æ¯çˆ¶çˆ¶': 'å¤–æ›¾ç¥–çˆ¶', 'æ¯çˆ¶æ¯': 'å¤–æ›¾ç¥–æ¯',
            'çˆ¶å…„å­': 'å ‚å“¥', 'çˆ¶å¼Ÿå­': 'å ‚å¼Ÿ', 'çˆ¶å§å­': 'è¡¨å“¥', 'çˆ¶å¦¹å­': 'è¡¨å¼Ÿ',
            'æ¯å…„å­': 'è¡¨å“¥', 'æ¯å¼Ÿå­': 'è¡¨å¼Ÿ', 'æ¯å§å­': 'è¡¨å“¥', 'æ¯å¦¹å­': 'è¡¨å¼Ÿ',
            'çˆ¶å…„å¥³': 'å ‚å§', 'çˆ¶å¼Ÿå¥³': 'å ‚å¦¹', 'çˆ¶å§å¥³': 'è¡¨å§', 'çˆ¶å¦¹å¥³': 'è¡¨å¦¹',
            'æ¯å…„å¥³': 'è¡¨å§', 'æ¯å¼Ÿå¥³': 'è¡¨å¦¹', 'æ¯å§å¥³': 'è¡¨å§', 'æ¯å¦¹å¥³': 'è¡¨å¦¹'
        };

        // åå‘å…³ç³»
        const REVERSE_RELATIONS = {
            'çˆ·çˆ·': 'å­™å­', 'å¥¶å¥¶': 'å­™å¥³', 'å¤–å…¬': 'å¤–å­™', 'å¤–å©†': 'å¤–å­™å¥³',
            'ä¼¯çˆ¶': 'ä¾„å­/ä¾„å¥³', 'å”å”': 'ä¾„å­/ä¾„å¥³', 'å§‘å§‘': 'ä¾„å­/ä¾„å¥³',
            'èˆ…èˆ…': 'å¤–ç”¥/å¤–ç”¥å¥³', 'å§¨å¦ˆ': 'å¤–ç”¥/å¤–ç”¥å¥³',
            'å“¥å“¥': 'å¼Ÿå¼Ÿ/å¦¹å¦¹', 'å¼Ÿå¼Ÿ': 'å“¥å“¥/å§å§', 'å§å§': 'å¼Ÿå¼Ÿ/å¦¹å¦¹', 'å¦¹å¦¹': 'å“¥å“¥/å§å§',
            'ä¾„å­': 'ä¼¯çˆ¶/å”å”', 'ä¾„å¥³': 'ä¼¯çˆ¶/å”å”', 'å¤–ç”¥': 'èˆ…èˆ…/å§¨å¦ˆ', 'å¤–ç”¥å¥³': 'èˆ…èˆ…/å§¨å¦ˆ',
            'å­™å­': 'çˆ·çˆ·/å¥¶å¥¶', 'å­™å¥³': 'çˆ·çˆ·/å¥¶å¥¶', 'å¤–å­™': 'å¤–å…¬/å¤–å©†', 'å¤–å­™å¥³': 'å¤–å…¬/å¤–å©†',
            'å…¬å…¬': 'å„¿åª³', 'å©†å©†': 'å„¿åª³', 'å²³çˆ¶': 'å¥³å©¿', 'å²³æ¯': 'å¥³å©¿',
            'å„¿åª³': 'å…¬å…¬/å©†å©†', 'å¥³å©¿': 'å²³çˆ¶/å²³æ¯',
            'å ‚å“¥': 'å ‚å¼Ÿ/å ‚å¦¹', 'å ‚å¼Ÿ': 'å ‚å“¥/å ‚å§', 'è¡¨å“¥': 'è¡¨å¼Ÿ/è¡¨å¦¹', 'è¡¨å¼Ÿ': 'è¡¨å“¥/è¡¨å§'
        };

        function addRelation(relation) {
            relationChain.push(relation);
            updateDisplay();
        }

        function deleteLast() {
            if (relationChain.length > 0) {
                relationChain.pop();
                updateDisplay();
            }
        }

        function updateDisplay() {
            const chainEl = document.getElementById('relationChain');
            const resultValue = document.getElementById('resultValue');
            const resultTitle = document.getElementById('resultTitle');
            const resultReverse = document.getElementById('resultReverse');
            const isReverse = document.getElementById('reverseMode').checked;
            const gender = document.querySelector('input[name="gender"]:checked').value;

            // æ›´æ–°å…³ç³»é“¾æ˜¾ç¤º
            if (relationChain.length === 0) {
                chainEl.innerHTML = '<span style="color: var(--text-muted);">è¯·ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®æ·»åŠ å…³ç³»</span>';
                resultValue.textContent = 'è¯·é€‰æ‹©å…³ç³»';
                resultReverse.textContent = '';
                return;
            }

            let chainHtml = '<span class="chain-item">æˆ‘</span>';
            relationChain.forEach((rel, index) => {
                chainHtml += '<span class="chain-arrow">â†’</span>';
                chainHtml += `<span class="chain-item">${RELATION_MAP[rel][gender]}</span>`;
            });
            chainEl.innerHTML = chainHtml;

            // è®¡ç®—å…³ç³»ç§°è°“
            const chainStr = relationChain.join('');
            let result = COMPOUND_RELATIONS[chainStr];

            if (!result) {
                // å°è¯•é€æ­¥åŒ¹é…
                for (let i = chainStr.length; i > 0; i--) {
                    const subStr = chainStr.substring(0, i);
                    if (COMPOUND_RELATIONS[subStr]) {
                        result = COMPOUND_RELATIONS[subStr];
                        if (i < chainStr.length) {
                            result += 'çš„' + calculateSimpleRelation(chainStr.substring(i), gender);
                        }
                        break;
                    }
                }
            }

            if (!result) {
                result = calculateSimpleRelation(chainStr, gender);
            }

            // æ˜¾ç¤ºç»“æœ
            resultTitle.textContent = isReverse ? 'å¯¹æ–¹ç§°å‘¼æˆ‘' : 'æˆ‘ç§°å‘¼å¯¹æ–¹';
            
            if (isReverse) {
                const reverseResult = REVERSE_RELATIONS[result] || result;
                resultValue.textContent = reverseResult;
                resultReverse.textContent = `æˆ‘ç§°å‘¼å¯¹æ–¹ï¼š${result}`;
            } else {
                resultValue.textContent = result;
                const reverseResult = REVERSE_RELATIONS[result] || result;
                resultReverse.textContent = `å¯¹æ–¹ç§°å‘¼æˆ‘ï¼š${reverseResult}`;
            }
        }

        function calculateSimpleRelation(chain, gender) {
            if (chain.length === 1) {
                return RELATION_MAP[chain][gender];
            }
            // ç®€åŒ–å¤„ç†ï¼Œè¿”å›åŸºæœ¬å…³ç³»æè¿°
            const relations = chain.split('').map(r => RELATION_MAP[r][gender]);
            return relations.join('çš„');
        }

        // ç›‘å¬é€‰é¡¹å˜åŒ–
        document.getElementById('reverseMode').addEventListener('change', updateDisplay);
        document.querySelectorAll('input[name="gender"]').forEach(radio => {
            radio.addEventListener('change', updateDisplay);
        });
    </script>
</body>
</html>
