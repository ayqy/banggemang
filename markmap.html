<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ä¾¿æ·æ€ç»´å¯¼å›¾-å¸®å°å¿™ï¼Œè…¾è®¯QQæµè§ˆå™¨åœ¨çº¿å·¥å…·ç®±</title>
    <link rel="stylesheet" href="css/style.css">
    <style>
        .markmap-container {
            background: #fff;
            border-radius: 8px;
            padding: 24px;
            margin-bottom: 20px;
        }
        .markmap-toolbar {
            display: flex;
            gap: 12px;
            margin-bottom: 16px;
            flex-wrap: wrap;
        }
        .toolbar-btn {
            padding: 8px 16px;
            background: var(--background-color);
            border: 1px solid var(--border-color);
            border-radius: 6px;
            font-size: 14px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 6px;
        }
        .toolbar-btn:hover {
            border-color: var(--primary-color);
            color: var(--primary-color);
        }
        .toolbar-btn.primary {
            background: var(--primary-color);
            color: #fff;
            border-color: var(--primary-color);
        }
        .markmap-workspace {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 16px;
            min-height: 500px;
        }
        @media (max-width: 1024px) {
            .markmap-workspace {
                grid-template-columns: 1fr;
            }
        }
        .editor-panel {
            border: 1px solid var(--border-color);
            border-radius: 8px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        .panel-header {
            background: var(--background-color);
            padding: 12px 16px;
            font-weight: 500;
            border-bottom: 1px solid var(--border-color);
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .editor-area {
            flex: 1;
            padding: 16px;
        }
        .editor-area textarea {
            width: 100%;
            height: 100%;
            min-height: 400px;
            border: none;
            resize: none;
            font-family: 'Monaco', 'Menlo', 'Ubuntu Mono', monospace;
            font-size: 14px;
            line-height: 1.6;
            outline: none;
        }
        .preview-panel {
            border: 1px solid var(--border-color);
            border-radius: 8px;
            overflow: hidden;
            display: flex;
            flex-direction: column;
        }
        .preview-area {
            flex: 1;
            padding: 20px;
            overflow: auto;
            background: #fff;
        }
        .mindmap-root {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
        }
        .mindmap-node {
            display: flex;
            align-items: flex-start;
            margin-bottom: 8px;
        }
        .mindmap-node .node-content {
            display: flex;
            align-items: center;
            gap: 8px;
        }
        .mindmap-node .node-text {
            background: var(--primary-color);
            color: #fff;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            display: inline-block;
        }
        .mindmap-node.level-2 .node-text {
            background: #8B7CF7;
        }
        .mindmap-node.level-3 .node-text {
            background: #A29BFE;
        }
        .mindmap-node.level-4 .node-text {
            background: #DDD6FE;
            color: var(--text-primary);
        }
        .mindmap-children {
            margin-left: 32px;
            padding-left: 16px;
            border-left: 2px solid var(--border-color);
        }
        .template-list {
            display: flex;
            gap: 8px;
            flex-wrap: wrap;
        }
        .template-btn {
            padding: 6px 12px;
            background: var(--background-color);
            border: 1px solid var(--border-color);
            border-radius: 16px;
            font-size: 12px;
            cursor: pointer;
        }
        .template-btn:hover {
            border-color: var(--primary-color);
            color: var(--primary-color);
        }
    </style>
</head>
<body data-category="education">
    <header class="header">
        <a href="index.html" class="header-logo">
            <span class="header-logo-icon">ğŸ”§</span>
            <div class="header-logo-text">
                <span class="header-logo-title">å¸®å°å¿™</span>
                <span class="header-logo-subtitle">è…¾è®¯QQæµè§ˆå™¨åœ¨çº¿å·¥å…·ç®±</span>
            </div>
        </a>
    </header>

    <div class="page-container">
        <aside class="sidebar"><nav class="sidebar-nav"></nav></aside>

        <main class="main-content">
            <div class="tool-page">
                <div class="tool-header">
                    <div class="tool-icon" style="background: #F39C12;">ğŸ§ </div>
                    <h1 class="tool-title">ä¾¿æ·æ€ç»´å¯¼å›¾</h1>
                </div>

                <div class="tool-main">
                    <div class="markmap-container">
                        <div class="markmap-toolbar">
                            <div class="template-list">
                                <span style="font-size: 14px; color: var(--text-secondary); margin-right: 8px;">æ¨¡æ¿ï¼š</span>
                                <button class="template-btn" onclick="loadTemplate('default')">é»˜è®¤æ¨¡æ¿</button>
                                <button class="template-btn" onclick="loadTemplate('project')">é¡¹ç›®è®¡åˆ’</button>
                                <button class="template-btn" onclick="loadTemplate('study')">å­¦ä¹ ç¬”è®°</button>
                                <button class="template-btn" onclick="loadTemplate('meeting')">ä¼šè®®è®°å½•</button>
                            </div>
                            <button class="toolbar-btn primary" onclick="exportImage()">ğŸ“¥ å¯¼å‡ºå›¾ç‰‡</button>
                            <button class="toolbar-btn" onclick="clearEditor()">ğŸ—‘ï¸ æ¸…ç©º</button>
                        </div>

                        <div class="markmap-workspace">
                            <div class="editor-panel">
                                <div class="panel-header">ğŸ“ Markdown ç¼–è¾‘å™¨</div>
                                <div class="editor-area">
                                    <textarea id="markdownInput" placeholder="è¾“å…¥Markdownæ ¼å¼çš„æ€ç»´å¯¼å›¾å†…å®¹..."># ä¸­å¿ƒä¸»é¢˜

## åˆ†æ”¯ä¸€
- å­é¡¹1
- å­é¡¹2

## åˆ†æ”¯äºŒ
- å­é¡¹1
- å­é¡¹2
  - ç»†èŠ‚1
  - ç»†èŠ‚2

## åˆ†æ”¯ä¸‰
- å­é¡¹1
- å­é¡¹2</textarea>
                                </div>
                            </div>

                            <div class="preview-panel">
                                <div class="panel-header">ğŸ‘ï¸ æ€ç»´å¯¼å›¾é¢„è§ˆ</div>
                                <div class="preview-area" id="previewArea">
                                    <div class="mindmap-root" id="mindmapRoot"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="tool-intro">
                    <h3>å·¥å…·ä»‹ç»åŠä½¿ç”¨æ–¹æ³•</h3>
                    <p>ä¾¿æ·æ€ç»´å¯¼å›¾å·¥å…·å¯ä»¥å¸®åŠ©æ‚¨å¿«é€Ÿåˆ›å»ºå’Œç¼–è¾‘æ€ç»´å¯¼å›¾ã€‚ä½¿ç”¨Markdownæ ¼å¼çš„ç®€å•è¯­æ³•ï¼Œå³å¯å®æ—¶ç”Ÿæˆæ€ç»´å¯¼å›¾é¢„è§ˆã€‚æ”¯æŒå¤šç§é¢„è®¾æ¨¡æ¿ï¼Œé€‚ç”¨äºé¡¹ç›®è§„åˆ’ã€å­¦ä¹ ç¬”è®°ã€ä¼šè®®è®°å½•ç­‰åœºæ™¯ã€‚ç¼–è¾‘å®Œæˆåå¯å¯¼å‡ºä¸ºå›¾ç‰‡ä¿å­˜ã€‚</p>
                </div>

                <div class="more-recommend">
                    <h3 class="more-recommend-title">æ›´å¤šæ¨è</h3>
                    <div class="recommend-list">
                        <a href="wordcount.html" class="recommend-item">
                            <div class="recommend-item-icon">ğŸ“</div>
                            <div class="recommend-item-content">
                                <div class="recommend-item-title">å­—æ•°è®¡ç®—</div>
                                <div class="recommend-item-desc">ç»Ÿè®¡æ–‡æœ¬çš„ä¸­æ–‡å­—æ•°ã€å­—ç¬¦æ•°ã€è‹±æ–‡å•è¯æ•°ã€‚</div>
                            </div>
                        </a>
                        <a href="translate.html" class="recommend-item">
                            <div class="recommend-item-icon">ğŸŒ</div>
                            <div class="recommend-item-content">
                                <div class="recommend-item-title">ç¿»è¯‘</div>
                                <div class="recommend-item-desc">å¤šè¯­è¨€ç¿»è¯‘å·¥å…·ï¼Œæ”¯æŒå¤šç§è¯­è¨€äº’è¯‘ã€‚</div>
                            </div>
                        </a>
                    </div>
                </div>
            </div>
        </main>
    </div>

    <footer class="footer">
        <div class="footer-content">
            <div class="footer-logo"><span>ğŸ”§</span><span class="footer-text">è½»æ¾åŠå…¬ï¼Œå·¥å…·åŠ©ä½ ä¸€è‡‚ä¹‹åŠ›</span></div>
            <div class="footer-links">
                <a href="https://rule.tencent.com/rule/preview/10c4538f-a3b6-4292-803d-5c8498657b75" target="_blank" class="footer-link">éšç§æ”¿ç­–</a>
                <a href="https://static.res.qq.com/nav/qbtool/qbtool-license.html" target="_blank" class="footer-link">æ•°æ®å¤„ç†è§„åˆ™åŠå…è´£å£°æ˜</a>
            </div>
            <div class="footer-copyright">Copyright Â© 1998 - 2026 Tencent. All Rights Reserved.</div>
        </div>
    </footer>

    <script src="js/common.js"></script>
    <script>
        // æ¨¡æ¿æ•°æ®
        const TEMPLATES = {
            default: `# ä¸­å¿ƒä¸»é¢˜

## åˆ†æ”¯ä¸€
- å­é¡¹1
- å­é¡¹2

## åˆ†æ”¯äºŒ
- å­é¡¹1
- å­é¡¹2
  - ç»†èŠ‚1
  - ç»†èŠ‚2

## åˆ†æ”¯ä¸‰
- å­é¡¹1
- å­é¡¹2`,
            project: `# é¡¹ç›®è®¡åˆ’

## éœ€æ±‚åˆ†æ
- ç”¨æˆ·è°ƒç ”
- éœ€æ±‚æ–‡æ¡£
- åŸå‹è®¾è®¡

## å¼€å‘é˜¶æ®µ
- å‰ç«¯å¼€å‘
- åç«¯å¼€å‘
- æ•°æ®åº“è®¾è®¡

## æµ‹è¯•ä¸Šçº¿
- åŠŸèƒ½æµ‹è¯•
- æ€§èƒ½æµ‹è¯•
- ä¸Šçº¿éƒ¨ç½²

## é¡¹ç›®æ€»ç»“
- ç»éªŒæ€»ç»“
- æ–‡æ¡£å½’æ¡£`,
            study: `# å­¦ä¹ ç¬”è®°

## ç¬¬ä¸€ç«  æ¦‚è¿°
- åŸºæœ¬æ¦‚å¿µ
- å‘å±•å†å²
- åº”ç”¨åœºæ™¯

## ç¬¬äºŒç«  æ ¸å¿ƒå†…å®¹
- ç†è®ºåŸºç¡€
- å®è·µæ–¹æ³•
- æ¡ˆä¾‹åˆ†æ

## ç¬¬ä¸‰ç«  è¿›é˜¶çŸ¥è¯†
- é«˜çº§æŠ€å·§
- å¸¸è§é—®é¢˜
- è§£å†³æ–¹æ¡ˆ

## å¤ä¹ è¦ç‚¹
- é‡ç‚¹å†…å®¹
- æ˜“é”™ç‚¹
- æ‰©å±•é˜…è¯»`,
            meeting: `# ä¼šè®®è®°å½•

## ä¼šè®®ä¿¡æ¯
- æ—¶é—´ï¼š2024å¹´1æœˆ1æ—¥
- åœ°ç‚¹ï¼šä¼šè®®å®¤A
- å‚ä¼šäººå‘˜ï¼šå…¨å‘˜

## è®®é¢˜ä¸€
- è®¨è®ºå†…å®¹
- å†³è®®ç»“æœ
- è´£ä»»äºº

## è®®é¢˜äºŒ
- è®¨è®ºå†…å®¹
- å†³è®®ç»“æœ
- è´£ä»»äºº

## å¾…åŠäº‹é¡¹
- äº‹é¡¹1 @è´Ÿè´£äºº
- äº‹é¡¹2 @è´Ÿè´£äºº
- äº‹é¡¹3 @è´Ÿè´£äºº`
        };

        // è§£æMarkdownç”Ÿæˆæ€ç»´å¯¼å›¾
        function parseMarkdown(markdown) {
            const lines = markdown.trim().split('\n');
            const root = { text: '', children: [], level: 0 };
            const stack = [root];

            lines.forEach(line => {
                const trimmed = line.trim();
                if (!trimmed) return;

                let level = 0;
                let text = trimmed;

                // è®¡ç®—ç¼©è¿›å±‚çº§
                if (trimmed.startsWith('- ')) {
                    level = line.search(/\S/) / 2 + 1;
                    text = trimmed.substring(2);
                } else if (trimmed.match(/^#{1,6}\s/)) {
                    const match = trimmed.match(/^(#{1,6})\s/);
                    level = match[1].length;
                    text = trimmed.substring(match[0].length);
                } else {
                    return;
                }

                const node = { text, children: [], level };

                // æ‰¾åˆ°æ­£ç¡®çš„çˆ¶èŠ‚ç‚¹
                while (stack.length > 1 && stack[stack.length - 1].level >= level) {
                    stack.pop();
                }

                stack[stack.length - 1].children.push(node);
                stack.push(node);
            });

            return root.children.length > 0 ? root.children : [root];
        }

        // æ¸²æŸ“æ€ç»´å¯¼å›¾
        function renderMindmap(nodes, container, level = 1) {
            if (!nodes || nodes.length === 0) return '';

            let html = '<div class="mindmap-children">';
            nodes.forEach(node => {
                html += `
                    <div class="mindmap-node level-${level}">
                        <div class="node-content">
                            <span class="node-text">${escapeHtml(node.text)}</span>
                        </div>
                    </div>
                `;
                if (node.children && node.children.length > 0) {
                    html += renderMindmap(node.children, container, level + 1);
                }
            });
            html += '</div>';
            return html;
        }

        function escapeHtml(text) {
            const div = document.createElement('div');
            div.textContent = text;
            return div.innerHTML;
        }

        // æ›´æ–°é¢„è§ˆ
        function updatePreview() {
            const markdown = document.getElementById('markdownInput').value;
            const nodes = parseMarkdown(markdown);
            const root = document.getElementById('mindmapRoot');

            if (nodes.length > 0) {
                let html = '';
                nodes.forEach((node, index) => {
                    html += `
                        <div class="mindmap-node level-1">
                            <div class="node-content">
                                <span class="node-text">${escapeHtml(node.text)}</span>
                            </div>
                        </div>
                    `;
                    if (node.children && node.children.length > 0) {
                        html += renderMindmap(node.children, null, 2);
                    }
                });
                root.innerHTML = html;
            } else {
                root.innerHTML = '<p style="color: var(--text-muted);">è¯·è¾“å…¥Markdownå†…å®¹ç”Ÿæˆæ€ç»´å¯¼å›¾</p>';
            }
        }

        function loadTemplate(name) {
            document.getElementById('markdownInput').value = TEMPLATES[name] || '';
            updatePreview();
        }

        function clearEditor() {
            if (confirm('ç¡®å®šè¦æ¸…ç©ºç¼–è¾‘å™¨å†…å®¹å—ï¼Ÿ')) {
                document.getElementById('markdownInput').value = '';
                updatePreview();
            }
        }

        function exportImage() {
            alert('å›¾ç‰‡å¯¼å‡ºåŠŸèƒ½éœ€è¦å¼•å…¥é¢å¤–çš„åº“æ”¯æŒï¼Œå½“å‰ç‰ˆæœ¬æš‚ä¸æ”¯æŒã€‚\n\næ‚¨å¯ä»¥ä½¿ç”¨æµè§ˆå™¨æˆªå›¾åŠŸèƒ½ï¼ˆå¦‚Chromeçš„å¼€å‘è€…å·¥å…·ï¼‰æ¥ä¿å­˜æ€ç»´å¯¼å›¾ã€‚');
        }

        // ç›‘å¬è¾“å…¥å˜åŒ–
        document.getElementById('markdownInput').addEventListener('input', updatePreview);

        // åˆå§‹åŒ–
        updatePreview();
    </script>
</body>
</html>
